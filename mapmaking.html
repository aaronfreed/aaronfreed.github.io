<!DOCTYPE html>
<html lang="en-us">
<head>
	<title>Marathon Mapmaking: Setup, Snafus, &amp; Solutions</title>
	<link rel="stylesheet" type="text/css" href="css.css">
	<script>
function sortTable(table, col, reverse) {
	var tb = table.tBodies[0], // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
		tr = Array.prototype.slice.call(tb.rows, 0), // put rows into array
		i;
	reverse = -((+reverse) || -1);
	tr = tr.sort(function (a, b) { // sort rows
		return reverse // `-1 *` if want opposite order
			* (a.cells[col].textContent.trim() // using `.textContent.trim()` for test
				.localeCompare(b.cells[col].textContent.trim(), undefined, {numeric: true})
			);
	});
	for(i = 0; i < tr.length; ++i) tb.appendChild(tr[i]); // append each row in order
}

function makeSortable(table) {
	var th = table.tHead, i;
	th && (th = th.rows[0]) && (th = th.cells);
	if (th) i = th.length;
	else return; // if no `<thead>` then do nothing
	while (--i >= 0) (function (i) {
		var dir = 1;
		th[i].addEventListener('click', function () {sortTable(table, i, (dir = 1 - dir))});
	}(i));
}

function makeAllSortable(parent) {
	parent = parent || document.body;
	var t = parent.getElementsByTagName('table'), i = t.length;
	while (--i >= 0) makeSortable(t[i]);
}

window.onload = function () {makeAllSortable();};
	</script>
</head>
<body>

<header>
<h1>Marathon Mapmaking: Setup, Snafus, &amp; Solutions</h1>
	
	<p>This document is a guide to content creation for <strong><a href="https://alephone.lhowon.org/" target="_blank">Marathon Aleph One</a></strong>, an open-source engine based on <strong>Bungie</strong>&rsquo;s groundbreaking first-person shooter trilogy (<span class="decimal">1994-1996</span>) &ndash; <em>not</em> its upcoming extraction shooter (though I&rsquo;m quite intrigued by the latter).</p>

	<p>This is primarily designed as an advanced document and contains far more information than beginners will need (or even want) to know; if you&rsquo;re just getting started, you should consult my <a href="mapmaking101.html">beginner&rsquo;s guide</a> instead. However, I recommend bookmarking this link so you can return here when you&rsquo;ve mastered the basics.</p>
	
	<p>My beginners&rsquo; guide features links to editors, the official Forge and Anvil documentation, the official Forge tutorials, other useful guides/resources, and links to communities where users may be able to find solutions to problems not covered in any of my guides.</p>

	<p>This guide contains overviews of both common and uncommon problems creators may face (and solutions thereto). It&rsquo;s meant to help troubleshoot several problems with <em>Marathon</em> content creation that, as far as I know, aren&rsquo;t documented anywhere else well, if at all.</p>

	<p>I&rsquo;m currently reorganizing this guide into smaller, more digestible pages &ndash; apologies for the inconvenience, but the ultimate form should be both more accessible and more logically organized.</p>

	<p>Should you have any suggestions for improvements to this guide or notice any errors, please either <a href="aboutme.html">contact me or submit to this page&rsquo;s GitHub repository</a>. (If you&rsquo;d like to be credited, please let me know.)</p>

<h1 id="toc">Table of Contents</h1>

	<ol class="toc">
		<li><a href="#top">Introduction</a></li>
		<li><a href="#toc">Table of Contents</a> (you&rsquo;re looking at it?)</li>
		<!--<li><a href="#resources">Resources</a>
			<ol>
				<li><a href="#resourcesa1">Aleph One Content Editing (<em>Marathon <span class="decimal">2</span></em>/<em>Infinity</em> Format)</a></li>
				<li><a href="#resourcesm1"><em>Marathon <span class="decimal">1</span></em> Content Editing for Aleph One</a></li>
				<li><a href="#tutorialsother">Other Tutorials &amp; Resources</a></li>
				<li><a href="#resourcescommunity">Marathon Communities &amp; Resources</a></li>
			</ol>
		</li>-->
		<li><a href="#general">General</a>
			<ol>
				<!--<li><a href="#welandsetup">Weland Setup</a>
					<ol>
						<li><a href="#welandpreferences">Configuring Weland&rsquo;s Preferences</a></li>
						<li><a href="#visualmodemac">Installing Visual Mode &amp; Vasara (MacOS)</a></li>
						<li><a href="#visualmodewinlin">Installing Visual Mode &amp; Vasara (Linux &amp; Windows)</a></li>
						<li><a href="#visualmodepreferences">Configuring Weland!Aleph One</a></li>
					</ol>
				</li>-->
			</ol>
		</li>
		<li><a href="#mapmaking">Mapmaking</a>
			<ol>
				<!--<li><a href="#forgeerrata">Forge Manual Errata &amp; Omissions</a></li>-->
				<li><a href="#generalmapmaking">General Notes</a></li>
				<li><a href="#scripts">Scripts, Monster Limits, &amp; Music</a>
					<!--<ol>
						<li><a href="#looper">Looping Music</a></li>
					</ol>-->
				</li>
				<li><a href="#tagsareterrible">Tags Are Terrible (though sometimes inexorable)</a>
					<ol>
						<li><a href="#waysaroundtags">Ways to Avoid Tags</a></li>
					</ol>
				</li>
				<li><a href="#ambientsound">Ambient Sound</a></li>
				<!--<li><a href="#texturingissues">Texturing Issues in Visual Mode.lua and Vasara</a>
					<ol>
						<li><a href="#vasaratexturing">Further Texturing Issues in Vasara</a></li>
					</ol>
				</li>-->
				<li><a href="#m1legacy"><em>Marathon <span class="decimal">1</span></em> Legacy Compatibility</a>
					<ol>
						<li><a href="#m1polygons">Those Weird <em>Marathon <span class="decimal">1</span></em> Polygon Types</a></li>
						<li><a href="#m1missions"><em>Marathon <span class="decimal">1</span></em> Mission Types</a></li>
						<li><a href="#m1compatibility"><em>Marathon <span class="decimal">1</span></em> Compatibility Flags</a></li>
					</ol>
				</li>
				<li><a href="#8bitsoftware">8-bit Software Mode</a>
					<ol>
						<li><a href="#8bitsoftwareimages">The Images File</a></li>
						<li><a href="#chapterscreens">Chapter Screens</a></li>
					</ol>
				</li>
				<li><a href="#directionality">Directionality</a></li>
				<!--<li><a href="#circles">Circles and the Custom Grid</a>
					<ol>
						<li><a href="#radii">Radii and Rotations for <span class="decimal">1</span> WU-long Sides with Regular Polygons</a></li>
					</ol>
				</li>-->
				<!--<li><a href="#mapcomplexity">Map Complexity: A Case Study</a></li>-->
			</ol>
		</li>
		<li><a href="#ShapeFusion">ShapeFusion</a>
			<ol>
				<li><a href="#general">General</a>
				<li><a href="#clutrestrictions">Restrictions on Number of Colors</a></li>
				<li><a href="#transparency">Transparency &amp; Landscapes</a></li>
				<li><a href="#sequencetiming">Sequence Timing &amp; Film Compatibility</a></li>
				<li><a href="#weaponsinhand">&lsquo;Weapons in Hand&rsquo; Sequences</a></li>
			</ol>
		</li>
		<li><a href="#appendices">Appendices &amp; Transplanted Content</a></li>
		<!--
		<li><a href="#sounds">Sounds</a>
				<ol>
				<li><a href="#sounds-general">General Notes</a></li>
				<li><a href="#soundids">Vanilla <em>Infinity</em> Sound ID List</a></li>
				<li><a href="#soundsources">Sound Sources</a></li>
			</ol>
		</li>
		<li><a href="#anvilhelp">The Annotated Anvil Help Balloons</a>
			<ol>
				<li><a href="#physicsmodels">Physics Models</a>
					<ol>
						<li><a href="#anvilaliens">Aliens</a>
							<ol>
								<li><a href="#alienappearance">Appearance and Sounds</a></li>
								<li><a href="#aliencombat">Combat Settings</a></li>
								<li><a href="#alienphysics">Physical Constants</a></li>
								<li><a href="#alienbehavior">Behavior Settings</a></li>
								<li><a href="#alienimmunities">Immunities and Weaknesses</a></li>
							</ol>
						</li>
						<li><a href="#anvileffects">Effects</a></li>
						<li><a href="#anvilshots">Shots</a></li>
						<li><a href="#anvilphysics">Physics</a></li>
						<li><a href="#anvilweapons">Weapons</a>
							<ol>
								<li><a href="#weapondefinition">Weapon Definition</a></li>
								<li><a href="#triggersettings">Trigger Settings</a></li>
							</ol>
						</li>
					</ol>
				</li>
				<li><a href="#anvilsounds">Sounds</a></li>
				<li><a href="#anvilshapes">Shapes</a>
					<ol>
						<li><a href="#anvilbitmaps">Bitmaps and Color Tables</a></li>
						<li><a href="#anvilsequences">Frames and Sequences</a></li>
					</ol>
				</li>
			</ol>
		</li>
		<li><a href="#defaultnames">Example DefaultNames.txt</a></li>
		-->
		<li><a href="#thanks">Acknowledgements</a></li>
		<li><a href="#endnotes">Endnotes</a></li>
	</ol>

</header>

<h1 id="mapmaking">Mapmaking</h1>
<h2 id="generalmapmaking">General Notes</h2>

<ul>
	<li>Test your maps extensively on Total Carnage. If you&rsquo;re not good enough, get someone who is to test it. If you <em>are</em> good enough, note that you have a sort of &lsquo;home field advantage&rsquo; in already knowing the maps and your intended strategies &ndash; other players will find your maps harder than you think they will. Also, if something annoys you, it&rsquo;ll annoy other players ten times more.</li>
	<li>Monsters can&rsquo;t move through lines shorter than their diameters, as <a href="https://citadel.lhowon.org/litterbox/Forge/hastursworkshop/things2.html" target="_blank">Hastur&rsquo;s Workshop explains</a>. This link also features plenty of other vital information about monster path building.</li>
	<li>Aleph One lifts the vanilla <span class="decimal">1,024</span>-polygon limit (and several others), but a factor called map indices still limits map complexity, as <a href="http://pfhorums.com/viewtopic.php?p=73316#p73316" target="_blank">Aleph One developer treellama explained</a> (though the limit is now <span class="decimal">65,535</span>, not <span class="decimal">32,767</span>). The tl;dr:
		<ul>
			<li>Use as few sound objects as possible (but see below).</li>
			<li>Avoid clusters of small polygons and/or short lines.</li>
			<li>If you can cut out a vertex, line, or polygon without negatively affecting the map&rsquo;s appearance, collision detection, or monster path building (see the Hastur&rsquo;s Workshop explanation above), always cut it out. I go into some detail on this on my <a href="mapindexreduction.html">appendix on reducing map indices</a>, though take the map index counts on this page with a grain of salt for now &ndash; I&rsquo;m not yet sure I understand their allocation perfectly.</a></li>
		</ul>
	</li>
	<li>There are several hazards with the <strong>Activates Only Once</strong> flag for platforms (i.e., lifts and doors). Misusing this is one of the most common causes of incompletable levels.
		<ul>
			<li>At the risk of being overly editorial: these should always, <em>always</em>, <strong><em>ALWAYS</em></strong> have <strong>Can&rsquo;t Deactivate Externally</strong> checked. I can&rsquo;t stress this strongly enough. If a door that&rsquo;s meant to open deactivates before it becomes possible to pass through, that can render a level incompletable, and to compound the matter, players may save their games in such a state without having any idea they&rsquo;ve done anything wrong &ndash; which can be as mundane as &ldquo;shot switch with shotgun&rdquo; or &ldquo;accidentally hit Tab twice&rdquo;. In a guide such as this one, I&rsquo;d rarely call something Objectively Bad Game Design. This is the exception.
				 <ul>
					<li>To make matters worse, <strong>Can&rsquo;t Deactivate Externally</strong> is necessary but not sufficient to prevent soft locks &ndash; for starters, a platform set to activate only once must <em>also</em> not border any platforms that have either <strong>Activates: Deactivates Adjacent Platform</strong> or <strong>Deactivates: Deactivates Adjacent Platform</strong> selected, since those override <strong>Can&rsquo;t Deactivate Externally</strong>. I&rsquo;m currently not sure if this is new behaviour; I need to test it on an emulator later.</li>
					<li>As an indication of how much you should know before you break this rule, I&rsquo;ve encountered several otherwise professional-quality maps with <strong>Activates Only Once</strong> softlocks, including several levels of the original <em>Tempus Irae</em> that got their creator a job at Monolith Productions &ndash; so &lsquo;professional-quality&rsquo; is in no sense hyperbole. Are your maps good enough to get you a game development job? That&rsquo;s where they should probably be before you <em>think</em> about breaking this rule. (My maps haven&rsquo;t gotten me a game dev job, just in case it sounds like I&rsquo;m appealing to my own authority here.)</li>
					<li>The only <em>possible</em> acceptable exception to this rule is for missable secrets, but I&rsquo;d strongly discourage even that. If you absolutely <em>must</em> have a missable secret (please don&rsquo;t make your secrets missable), provide a way out for players caught on the wrong sides of doors (unless you mean to be <em>Marathon <span class="number">1</span></em>-level sadistic &ndash; please, <em>please</em> don&rsquo;t do this: secrets shouldn&rsquo;t <em>punish</em> players who find them!), and make sure any teleporters are usable (i.e., test them in-game).</li>
				</ul>
			</li>
			<li>Also, if such a door is <strong>Initially Extended</strong>, it should deactivate either <strong>At Each Level</strong> or <strong>Never</strong>. If it isn&rsquo;t, it should deactivate either <strong>At Initial Level</strong> or <strong>Never</strong>.</li>
			<li>Meanwhile, lifts that activate <strong>Only Once</strong> should probably deactivate <strong>Never</strong>. Otherwise, a player might be able to activate it, get off the lift, and be unable to get back up; this can also cause problems in cooperative games (if those are enabled).
				<ul><li>Platforms that are <strong>Initially Extended</strong> and <strong>Deactivate at Each Level</strong> may be possible exceptions to this, but you should still test them extensively.</li></ul>
			</li>
		</ul>
	</li>
	<li>Speaking of which, teleporters (and automatic exit polygons) behave oddly with media. If there&rsquo;s a liquid on the teleporter, it probably shouldn&rsquo;t have a current.</li>
	<li>It isn&rsquo;t necessary to move the player&rsquo;s start point to texture maps in Weland; just select the arrow, hold down X, make sure caps lock is off, and click on a polygon to set a start point.</li>
	<li>If you have a slider selected, the + and - keys will increment and decrement its value, and the Page Up and Page Down keys will increment and decrement it more (by a factor of ten, to be exact). Note that you must have <em>the slider</em> selected, not its associated button.</li>
	<li>Hold down Ctrl (&#8984; on Mac) and use the = and - keys to zoom the map in and out without selecting the zoom tool.</li>
	<li>If the primary and secondary active or primary and secondary inactive periods of any light add up to 0, Aleph One freezes without explanation &ndash; the cause is an infinite loop with no escape hatch. (This is a bug; the game should instead print out an assertion failure and quit so that mapmakers have some idea what they did wrong, and hopefully it will in a future release.)</li>
	<li>Trying to create a new scenery object using Lua leads to a similar freeze if the scenery object&rsquo;s sequence is set to &ldquo;Display a random frame&rdquo; with no defined frames (this is the equivalent of division by zero). This is probably also true for effects, ephemera, items, and monsters, and it may be true if the scenery object is created normally as well. (Again, this is a bug; the game should print an assertion failure explaining the problem, and hopefully it will in a future release.)</li>
</ul>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="scripts">Scripts, Monster Limits, &amp; Music</h2>
<ul>
	<li>You can override monster activation limits with MML scripts. If you&rsquo;re making a standalone scenario, override this in your scenario&rsquo;s <strong>Scripts</strong> folder. The code for this (which also raises some limits on rendered objects) is:

<pre>&lt;marathon&gt;
	&lt;dynamic_limits&gt;
		&lt;objects value="1024"/&gt;
		&lt;monsters value="512"/&gt;
		&lt;paths value="512"/&gt;
		&lt;projectiles value="256"/&gt;
		&lt;effects value="2048"/&gt;
		&lt;rendered value="1024"/&gt;
		&lt;local_collision value="1024"/&gt;
		&lt;global_collision value="1024"/&gt;
	&lt;/dynamic_limits&gt;
&lt;/marathon&gt;</pre>

	Alter as needed. By contrast, if mapping for <em>Infinity</em>, you&rsquo;ll probably want to merge in MML, unless you&rsquo;re fine with monsters randomly deactivating when more than twenty are active. There are multiple ways to do this; which to use depends in large part on what kind of level you&rsquo;re creating.</li>
	<li>If you&rsquo;re making a solo-only map, you have two ways to merge in scripts. You can save the above script as a TEXT resource (i.e., <strong>Resources/TEXT/<span class="decimal">10000</span>.txt</strong>) and call it in TEXT resource <span class="decimal">128</span> (i.e., <strong>Resources/TEXT/<span class="decimal">00128</span>.txt</strong>):</li>

<pre>&lt;marathon_levels&gt;
	&lt;level index="0"&gt;
		&lt;lua resource="420"&gt;
		&lt;mml resource="10000"/&gt;
		&lt;music file="Eternal-Data/Music/Craig/SwirlsPiano.ogg"/&gt;
	&lt;/level&gt;
&lt;/marathon_levels&gt;</pre>
	Or by including MML in each individual level&rsquo;s folder (i.e., <strong><span class="decimal">00</span> The Far Side of Nowhere/Monster Limits.mml</strong>).
	<div style="margin-top: 8px;">On the other hand, if you&rsquo;re making a multiplayer level for an existing scenario (this includes cooperative play), it&rsquo;s actually <em><strong>mandatory</strong></em> to use the latter method in most cases, since the game doesn&rsquo;t send TEXT resources to other players. Thus, if you use it for something that affects the game world, which includes limit-removing MML and most Lua, players will desync almost immediately. If you don&rsquo;t know if your script will affect the game world, it&rsquo;s safest to just assume it will. MML texture replacements, fog, and Treellama&rsquo;s ephemera-based precipitation script are some examples of things that don&rsquo;t affect the game world.</div>
	<div style="margin-top: 8px;"><span id="ftnt_ref01" class="dotted" title="What, you don&rsquo;t have a third hand? Then you must not be Zaphod Beeblebrox.">On the third hand<a href="#ftnt01">&#8317;&sup1;&#8318;</a></span>, if you&rsquo;re making a standalone scenario, you can include an MML script that includes the scenario and version number, which prevents anyone who <em>isn&rsquo;t</em> running that scenario and version number from joining network games. In these cases, you can safely assume anyone who <em>does</em> join your game already has the map, in which case they&rsquo;ll also have the scripts already and won&rsquo;t desync.</div>

<pre>&lt;marathon&gt;
	&lt;scenario id="Eternal X" id="Eternal X" version="1.3pre6" /&gt;
&lt;/marathon&gt;</pre>

	<div style="margin-top: 8px;">(Moving the map file out of the scenario folder or overwriting it with a different version of the map would fall into what I&rsquo;d consider &lsquo;Play stupid games, win stupid prizes&rsquo; territory. You may wish to put a caveat about this in your game&rsquo;s documentation, but I&rsquo;d imagine this would be a relatively rare occurrence.)</div></li>

	<li>OpenGL replacement graphics are a special case. They don&rsquo;t affect the game world, but they also shouldn&rsquo;t be merged in with the map. It&rsquo;s ideal to make these into a plugin so that players can choose whether to use them or not &ndash; some players may dislike the extra loading time or prefer chunky <span class="decimal">128</span>x<span class="decimal">128</span> pixel textures. (While replacement textures could theoretically be included in a map for another scenario, that would be quite odd &ndash; if you&rsquo;re to the point that you have replacement textures for your map, I&rsquo;d advise making that into a standalone scenario.)</li>
	<li>The <code>&lt;marathon_levels&gt;</code> code excerpt above also shows how to merge in music (i.e., the &lsquo;music file&rsquo; line). It&rsquo;s also possible to use Lua to implement music; doing so will in fact give you more options: you can control when to start the music (<em><a href="https://simplici7y.com/items/apotheosis-x-5" target="_blank">Apotheosis X</a></em> contains some examples of this), or change the music midlevel based on game events (<em><a href="https://simplici7y.com/items/eternal-x">Eternal X</a></em> <span class="decimal">1.3</span> contains some examples of this). A full explanation of Lua music is beyond the current scope of this guide &ndash; the music API&rsquo;s functionality is currently being expanded, so such a guide would become outdated almost immediately.</li>
</ul>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="tagsareterrible">Tags Are Terrible (though sometimes inexorable)</h2>

<p>Don&rsquo;t get me wrong &ndash; in the right circumstances, they&rsquo;re <em>immensely</em> useful. But they can also break the game if you don&rsquo;t know what you&rsquo;re doing, especially if they&rsquo;re marked as <strong>Repair</strong>. If you take two things away from this admittedly opinionated section:</p>
	
	<ol><li>Avoid ever marking tag switches or chip insertion slots as <strong>Repair</strong>.</li>
	<li>If you absolutely <em>must</em> mark such a switch as <strong>repair</strong>, make sure it controls <em>both</em> a light <em>and</em> a platform that can <em>always</em> activate <em>or</em> deactivate &ndash; that will <em>probably</em> work around the worst bugs. <em>Probably</em>. (Though you&rsquo;d still be able to deactivate the tag switch, which would make it possible to change a level state from complete to incomplete &ndash; annoying design, to say the least. This aspect, at least, isn&rsquo;t a problem for chips &ndash; once a chip is inserted, it stays inserted.)</li></ol>
	
<p>Now, for the gory details:</p>
	
<ul><li>Tags must be possible to activate when players attempt to activate them. Thus, if a (tag switch/wires/chip slot) controls only something that&rsquo;s controllable by other means and:
	<ul>
		<li>could be active when a player activates the tag and/or</li>
		<li>activates only once,</li>
	</ul>
	that can make a level impossible to complete.</li>
	<li>If a player deactivates a tag switch set to <strong>Repair</strong> and can&rsquo;t reactivate it, they can&rsquo;t finish the mission. Tag switches can&rsquo;t be activated if nothing they control can be activated; rather than risk this, consider never <del>using them</del> marking them as <strong>Repair</strong>. <em>Usually</em> <strong>Repair</strong>-safe:
		<ul><li>Destructible wires (they stay toggled).</li>
			<li>Platform switches (the game remembers they were toggled even if they deactivate).</li>
			<li>Light switches (they can be reactivated unless they&rsquo;re <strong>Destructible</strong> or <strong>Light Dependent</strong>).</li>
		</ul>
	</li>
	<li>Chip slots are a &lsquo;maybe&rsquo; on the <strong>Repair</strong> count. Unless set to the &lsquo;dummy&rsquo; tag <span class="decimal">0</span>, a chip slot&rsquo;s tag must control something, or it&rsquo;ll consume chips without activating (which also renders levels unbeatable).
		<blockquote><em><strong>Note:</strong> Aleph One <span class="decimal">1.7</span>, which was released on <span class="decimal">2023-11-25</span>, fixes the &lsquo;chip eating&rsquo; bug. However, as of this writing, it&rsquo;s hardly safe to assume all players have upgraded their Aleph One applications yet. It&rsquo;s possible to use Lua to print a warning to players using old versions of Aleph One; I&rsquo;d recommend this if you&rsquo;re comfortable using Lua. (Lua is beyond the current scope of this guide, but maybe someday I&rsquo;ll write a section on it or, better yet, a guide. [This guide desperately needs to be split into separate pages to begin with.])</em></blockquote>
	</li>
	<li>These bugs can interact, as well. If a chip controls a tag that can&rsquo;t activate, it can&rsquo;t toggle the <strong>Repair</strong> mission flag (rendering the level incompletable) and will eat any chips a hapless player tries to insert (possibly rendering future levels incompletable as well, in case a player is meant to have them on said levels).</li>
	<li>Avoid having multiple (chip slots/wires/tag switches) control the same tag.</li>
	<li>If a tag switch controls <em>only</em> lights, it must match the state of at least one of the lights to be able to activate. This means that if you have a tag that controls only a light that starts out active, and the tag switch connected to that light starts out inactive, the tag switch will be impossible to activate. Note that <em>this</em> aspect of tag switch behaviour does not appear to apply to chip insertion &ndash; you will still be able to insert a chip. Confused yet? Good.</li>
	<li>In a previous version of this guide, I wrote,
		<blockquote>&lsquo;If a tag controls a light, it can activate&hellip; probably. Given the absolutely cursed mess I&rsquo;ve detailed above, I&rsquo;m no longer confident that there isn&rsquo;t some <em>other</em> weird edge case with lights that we haven&rsquo;t yet worked out.&rsquo;</blockquote>
		To be fair, I qualified my statement, but we now know at least some of the exceptions. I&rsquo;m not confident that we know them all. The lesson I&rsquo;m drawing from this is that there are probably no universal rules with tags.</li>
	<li>There are also <a href="mapmaking101.html#texturingissues">texturing issues</a> &ndash; in short, if you toggle wires in visual mode, they will get set to not-wires and players will be unable to finish your level. There may be others.</li>
	<li>Basically, tags are awful; you should avoid marking them as &lsquo;<strong>Repair</strong>&rsquo; unless you&rsquo;re <em>completely</em> sure you know what you&rsquo;re doing, and even then, you should be sure you&rsquo;re not falling prey to the <a href="https://en.wikipedia.org/wiki/Dunning-Kruger_effect" target="_blank">Dunning-Kruger effect</a>. In all cases, I recommend using them with caution.</li></ul>
	
<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

	<h3 id="waysaroundtags">Ways to Avoid Tags</h3>
		
	<p>Tags aren&rsquo;t always necessary; the main cases where they are necessary are for destructible wires, chip insertion, or very odd arrangements of platforms. In most other cases, a sufficiently determined mapper can avoid using them. Some tips:</p>
	<ul>
		<li>Platforms can activate adjacent platforms when they activate. Or when they deactivate. And they can also deactivate platforms in those same places. And they can also activate adjacent platforms both when fully extended and when fully contracted (&lsquo;<strong>Activates Adjacent at Each Level</strong>&rsquo;).
		<li>Platforms can activate the lights on their floor and ceiling when they activate. They can also deactivate those lights when they deactivate.</li>
		<li>If you have multiple adjoining platforms, it&rsquo;s generally <em>preferable</em> to use a platform switch and set &lsquo;<strong>Activates: Activates Adjacent Platforms</strong>&rsquo; for those platforms &ndash; that way, players won&rsquo;t have to hit a switch twice each time they want to raise or lower the platform.</li>
		<li>If you want to get <em>really</em> adventurous, you can even make underground platform networks to connect otherwise unconnected platforms. Some notes on these:
			<ul>
				<li>Make them extend &lsquo;<strong>From Floor</strong>&rsquo; to reduce the odds of motion glitches, though you may still experience these occasionally (make sure to test the surrounding areas for them).</li>
				<li>These platform networks look ugly in Weland, but players won&rsquo;t see them. If you don&rsquo;t want to see them in the visual mode map either, you can even give them landscape textures. (However, avoid doing that on walls that players should be able to see the other side of, or those walls will disappear from the automap.)</li>
				<li>&lsquo;The Midpoint of Somewhere&rsquo; (from <em><a href="https://eternal.bungie.org/" target="_blank">Eternal</a></em> versions <span class="decimal">1.3</span> preview <span class="decimal">4</span> and later) contains several examples of this. I admittedly went overboard with it, partly to keep players from undoing their progression midlevel (it&rsquo;s already a convoluted enough level), partly out of sheer stubbornness, and partly to prove that I didn&rsquo;t need tags (but I repeat myself).</li>
			</ul>
		</li>
		<li>So, maybe you have a tag switch that you want to use to control your mission state, but you&rsquo;re &ndash; justifiably, given the absolutely cursed mess detailed above &ndash; afraid to actually mark it as &lsquo;<strong>Repair</strong>&rsquo;. What&rsquo;s a mapmaker to do? The most reliable case is probably to have the tag switch control an otherwise inaccessible platform (for the sake of our example, we&rsquo;ll call it Platform <span class="decimal">42</span>) that starts out inactive (ideally, just completely inaccessible from the rest of the map), and set one of the walls of Platform <span class="decimal">42</span> as a platform switch that&rsquo;s marked as &lsquo;<strong>Repair</strong>&rsquo;. Then set the tag switch to activate Platform <span class="decimal">42</span>. This also means that once you activate the tag switch, the game remembers that the platform switch was activated even if either the platform switch or the tag switch gets deactivated &ndash; thus working around another potential issue with using tag switches as &lsquo;<strong>Repair</strong>&rsquo;. I&rsquo;ve shown example settings for Platform <span class="decimal">42</span> below.

			<div class="image"><img src="platform42.png" width="637" height="472" alt="Settings for Platform 42, tag initially inactive" title="Settings for Platform 42, tag initially inactive" /></div>
				
			<ul>
				<li>The tag switch in the above example must start out as &lsquo;<strong>Inactive</strong>&rsquo;. If you need your tag switch to start out as &lsquo;<strong>Active</strong>&rsquo;, connect another platform &ndash; we&rsquo;ll just call it Platform <span class="decimal">43</span> &ndash; to Platform <span class="decimal">42</span> (note that it <em>must</em> share at least one side, and it <em>must not</em> be the side that had the platform switch on it). Start Platform <span class="decimal">43</span> as active, set it to &lsquo;<strong>Deactivates: Never</strong>&rsquo;, make sure &lsquo;<strong>Can&rsquo;t Deactivate Externally</strong>&rsquo; is <em><strong>unchecked</strong></em>, and make sure &lsquo;<strong>Deactivates: Activates Adjacent Platform</strong>&rsquo; is <em><strong>checked</strong></em>. In this example, you&rsquo;ll also want to remove the tag from Platform <span class="decimal">42</span>. Here are our settings for Platform <span class="decimal">43</span>.
				<div class="image"><img src="platform43.png" width="637" height="472" alt="Settings for Platform 43, tag initially active" title="Settings for Platform 43, tag initially active" /></div>

				<div style="margin-top: 12px;">And here are our revised settings for Platform <span class="decimal">42</span>.</div>

				<div class="image"><img src="platform42a.png" width="637" height="472" alt="Settings for Platform 42, tag initially active" title="Settings for Platform 42, tag initially active" /></div>

				<div style="margin-top: 12px;"><strong>Warning:</strong> I can&rsquo;t promise that either of these solutions are foolproof. If something messes with either platform&rsquo;s activation, it can still break the mission. And there are probably other potential ways to break them as well. I&rsquo;ve used wires, chip insertion switches, and tag switches as repair switches in some of my levels, but I&rsquo;ve also been doing this for some <span class="decimal">26</span> years, and in <span class="decimal">2023</span>, I&rsquo;m still learning new things that can break tags. They&rsquo;re even more cursed than platforms, which is saying <em>a lot</em>.</div>

				<div style="margin-top: 8px;">More importantly, given how convoluted all of the above is, I can almost guarantee you&rsquo;ll eventually misremember part of it and more than likely run afoul of one of the many things that can mess up tags. Bearing that in mind, isn&rsquo;t it safer to just avoid using them for repair missions at all? Of course it is.</div>
				</li>
				</ul>
			</li>
		</ul>
	</li>
</ul>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="ambientsound">Ambient Sound</h2>

<ul>
	<li>Platforms or doors with associated ambient sounds should have sound objects marked <strong>&lsquo;Is On Platform&rsquo;</strong> so that their &lsquo;moving&rsquo; sounds don&rsquo;t suddenly cut off when players walk off the platform, which sounds unnatural. This doesn&rsquo;t apply to platforms without ambient sounds (i.e., S&rsquo;pht Door, S&rsquo;pht Platform Silent).</li>
	<li>Liquids should have the correct associated sound objects near their edges. Failure to include these causes sudden cutoffs when players move from polygons with liquids to polygons without them (or vice versa). These should be marked <strong>&lsquo;Floats&rsquo;</strong> so they align to their liquids&rsquo; heights; if they fall below the liquids, they&rsquo;ll become almost inaudible, which defeats the purpose of placing them.</li>
	<li>If you place ambient sounds on polygons, boundaries between different ambient sounds (or between ambient sounds and silence) should have sound objects to avoid sudden cutoffs when players move between &lsquo;sound boundaries&rsquo;. This also results in directional sound, which enhances immersion.</li>
	<li>At the same time, avoid overusing sound objects, which eat up map indices worst of all factors that use them: one per polygon within a <span class="decimal">10</span>-world unit X/Y radius (Z is irrelevant). If this all sounds like a delicate juggling act, it is! No one said making maps for an ancient engine was <em>easy</em>. I recommend avoiding complicated &lsquo;sound boundaries&rsquo; or too many discrete polygon sounds per level.</li>
</ul>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="m1legacy"><em>Marathon <span class="decimal">1</span></em> Legacy Compatibility</h2>
<h3 id="m1polygons">Those Weird <em>Marathon <span class="decimal">1</span></em> Polygon Types</h3>
<ul>
	<li><strong>Minor Ouch</strong> behaves like <em>M1</em> lava: it only damages monsters and players that are touching the ground.</li>
	<li><strong>Major Ouch</strong> behaves like <em>M1</em> Pfhor goo: it damages monsters and players even if they&rsquo;re airborne.</li>
	<li>Both <strong>Ouch</strong> polygon types have additional behavior that only becomes active if <strong>Ouch Is Lava</strong> is checked in the <strong>Level Parameters</strong> box&rsquo;s <strong>M1 Compatibility</strong> section (see <a href="#m1compatibility">below</a>).</li>
	<li>If and only if <strong>Glue</strong> is checked in <strong>M1 Compatibility</strong>:
		<ul>
			<li>Monsters on <strong>Glue</strong> act deaf (but not blind) until players walk onto their polygons (or they&rsquo;re activated by other means). Sounds don&rsquo;t enter Glue polygons but can leave them.</li>
			<li>A <strong>Glue Trigger</strong> activates all monsters that aren&rsquo;t on or beyond Superglue or Zone Borders.</li>
			<li><strong>Superglue</strong> is <em>M<span class="decimal">1</span></em>&rsquo;s zone border equivalent; it stops Glue Trigger monster activation (as do Zone Borders).</li>
		</ul>
	</li>
	<li>Otherwise, these three related polygon types behave like <strong>Normal</strong> polygons.</li>
</ul>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h3 id="m1missions"><em>Marathon <span class="decimal">1</span></em> Mission Types</h3>

<ul>
	<li><strong>Exploration (M<span class="decimal">1</span>)</strong>: Like regular <strong>Exploration</strong>, except that rather than requiring players to walk on all <strong>Must Be Explored</strong> polygons (as in <em>M<span class="decimal">2</span></em>/<em>Infinity</em>-style <strong>Exploration</strong> missions), it merely requires players to look at them..
		<ul>
			<li>As mentioned above, looking at these in <strong>Visual Mode.lua</strong> or <strong>Vasara <span class="decimal">1</span>.<span class="decimal">0</span>.<span class="decimal">3</span></strong> resets them to <strong>&lsquo;Normal&rsquo;</strong>, so be careful. (<strong>Vasara AF</strong> overrides this behavior at the cost of making it impossible to complete <strong>Exploration</strong> missions while <strong>Vasara AF</strong> is active, but that&rsquo;s not what it&rsquo;s for, anyway; if all you want is to play the game without monsters, just use <a href="https://simplici7y.com/items/nature-s-peace/" target="_blank">Nature&rsquo;s Peace</a> instead.)</li>
			<li>If recollection serves, <em>Marathon <span class="decimal">1</span></em>&rsquo;s vanilla 64&deg; field of view (how did anyone cope?) is used to decide what players should be able to see. I&rsquo;ll eventually perform a deep dive of the code to confirm this.</li>
			<li>If both this and <strong>Exploration</strong> are set, I suspect this may take precedence. I&rsquo;ll confirm whether this is the case later, as well.</li>
		</ul>
	</li>
	<li><strong>Rescue (M<span class="decimal">1</span>):</strong> Does what the Forge manual <a href="mapmaking101.html#forgeerrata">erroneously claims</a> the <strong>Repair</strong> mission flag does. Remember to set at least one other mission type if you want this to have any significant impact on gameplay.</li>
	<li><strong>Repair (M<span class="decimal">1</span>):</strong> Like <strong>Repair</strong> except that the player must only activate one repair switch to successfully complete the mission. This raises the obvious question, &lsquo;Why would anyone program this into their game?&rsquo; The answer is that they probably wouldn&rsquo;t do it on purpose &ndash; unless they were maintaining legacy compatibility with a rather buggy 1994 game by a relatively inexperienced Macintosh developer.</li>
</ul>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h3 id="m1compatibility"><em>Marathon <span class="decimal">1</span></em> Compatibility Flags</h3>

All of these are found under <strong>Special</strong> &rightarrow; <strong>Level Parameters</strong> &rightarrow; <strong>M<span class="decimal">1</span> Compatibility</strong>.

<ul>
	<li><strong>Glue:</strong> <strong>Superglue</strong>, <strong>Glue Trigger</strong>, and <strong>Glue</strong> (see <a href="#m1polygons">above</a>) only function if this is selected.</li>
	<li><strong>Ouch Is Lava:</strong> Prevents monsters from leaving corpses on <strong>Minor Ouch</strong> or <strong>Major Ouch</strong> polygons if it&rsquo;s checked. (Those polygons will still damage players and monsters even if it isn&rsquo;t.)</li>
	<li><strong>Use Song Index:</strong> Overrides the landscape collection selector with a number used to select a song index. I believe that, e.g., music index 0 <strong>must</strong> be stored at a path like <strong>Music/00.mp3</strong>, <strong>Music/00.ogg</strong>, <strong>Music/00.wav</strong>, or <strong>Music/00.aif</strong>, and to my knowledge, these are the only four audio formats that will work with this method of playing music. I strongly recommend using any other method instead.</li>
	<li><strong>Terminals Stop Time:</strong> In the single-player game, game time will stop whenever the player is reading a terminal: oxygen won&rsquo;t deplete, monsters won&rsquo;t attack or move, the player won&rsquo;t even fall. In multiplayer games, this has no effect (because cooperative games literally do not exist in vanilla <em>Marathon <span class="decimal">1</span></em>, the game mode has no legacy compatibility requirements).</li>
	<li><strong>Activation Range:</strong> Something to do with switch or monster activation, maybe? I can&rsquo;t find the reference for it right now. Watch this space.</li>
	<li><strong>Weapon Behavior:</strong> On Total Carnage, walking over a weapon that the player already has will cause the player to undergo <em>M<span class="decimal">1</span></em>&rsquo;s fun equivalent of &lsquo;picking up&rsquo; the weapon. In reality, this actually overwrites the player&rsquo;s shot counter for that weapon with however many shots the new weapon would have had (which may or may not actually be greater than the player&rsquo;s current shot count, thanks to the alien weapon having random shot counts). The player will not actually be able to use any of this backlog of weapons.
		
		<p>If this sounds extremely unfun (and against the purpose of a first-person <em>shooter</em>), you&rsquo;re right! It&rsquo;s a vanilla <em>Marathon <span class="decimal">1</span></em> bug. Please don&rsquo;t use this flag for anything that isn&rsquo;t a painstakingly accurate <em>Marathon <span class="decimal">1</span></em> remake (we&rsquo;re talking a &lsquo;didn&rsquo;t even touch the &ldquo;Colony Ship&rdquo; puzzle&rsquo; level of accuracy).</p></li>
</ul>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="8bitsoftware"><span class="decimal">8</span>-bit Software Mode</h1>

<p>Aleph One <span class="decimal">1.4</span> restored <span class="decimal">8</span>-bit software mode after it had been unavailable for over a decade. This causes potential havoc in territory related to both ShapeFusion (shapes sequences) and Atque (images files, map resources). I address the latter immediately below; see the ShapeFusion section further below for the former.</p>
	
<h3 id="chapterscreens">Chapter Screens &amp; Sounds</h3>

<p>Aleph One won&rsquo;t display a chapter screen in <span class="decimal">8</span>-bit software mode unless it has an associated CLUT resource sharing the chapter screen&rsquo;s resource ID. Make sure to include these if you care about <span class="decimal">8</span>-bit software mode at all. Chapter screens go from <span class="decimal">1500</span> (for level <span class="decimal">0</span>) to <span class="decimal">1599</span> (for the end screen or, God help us all, level <span class="decimal">99</span>). Add <span class="decimal">10,000</span> for &lsquo;<span class="decimal">24</span>-bit&rsquo; versions and (I found this one out the hard way &ndash; by noticing it after a scenario release) <span class="decimal">20,000</span> for &lsquo;<span class="decimal">32</span>-bit&rsquo; versions. (This effectively makes <span class="decimal">115</span>xx and <span class="decimal">215</span>xx unusable if you have a level xx &ndash; but I&rsquo;m not sure if Aleph One will ever display the <span class="decimal">115</span>xx picture when the <span class="decimal">215</span>xx exists, so if you use <span class="decimal">215</span>xx for the chapter screen, you might be able to get away with using <span class="decimal">115</span>xx for a terminal picture.)</p>
	
<p>Also, if there&rsquo;s an associated sound sharing the <span class="decimal">15</span>xx ID, Aleph One will play it. This includes ending screens (though Aleph One also plays the music file, so it&rsquo;s probably not worth including a sound <span class="decimal">1599</span> unless you plan for your scenario not to have opening music).</p>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h3 id="8bitsoftwareimages">The Images File</h3>

<p>The Images file should have at least images <span class="decimal">1100</span> and <span class="decimal">1101</span> (&lsquo;enabled&rsquo; and &lsquo;disabled&rsquo; versions of the main menu) and <span class="decimal">1700</span> (the vanilla HUD). It also needs CLUT resources with the same IDs. If it lacks images <span class="decimal">1100</span> and <span class="decimal">1101</span> (and their accompanying CLUTs), the menu will show up black if a player selects <span class="decimal">8</span>-bit software, and if they then quit the game, they&rsquo;ll either need to delete their scenario preferences or manually edit them to fix the graphics settings (on the very slim chance they even know how to do this) &ndash; which will effectively render the scenario unplayable for many players.</p>

<p>For full reference, the resources in Images correspond to the following:</p>

<ul><li><strong><span class="decimal">1000</span>:</strong> Opening splash screen. If <span class="decimal">1001</span>, <span class="decimal">1002</span>, <span class="decimal">1003</span>, etc., are defined, the game subsequently displays each before loading the main menu. (Please don&rsquo;t overdo this.)</li>
<li><strong><span class="decimal">1100</span>:</strong> &lsquo;Disabled&rsquo; main menu.</li>
<li><strong><span class="decimal">1101</span>:</strong> &lsquo;Enabled&rsquo; main menu.</li>
<li><strong><span class="decimal">1400</span>, <span class="decimal">1401</span>, <span class="decimal">1402</span>, etc.:</strong> Credits pages. The game loads as many consecutive resources as are defined.</li>
<li><strong><span class="decimal">1700</span>:</strong> Default HUD.</li></ul>

<p>Add <span class="decimal">1,000</span> to each of these numbers for the &lsquo;<span class="decimal">24</span>-bit&rsquo; versions. It&rsquo;s ideal to have separate <span class="decimal">8</span>-bit and <span class="decimal">24</span>-bit versions, as IIRC, Photoshop and GIMP dither images much better than Aleph One does.</p>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="directionality">Directionality</h2>
<table>
	<thead>
		<tr>
			<td class="right">Angle</td>
			<td>Liquids</td>
			<td>Objects</td>
			<td>Lines</td>
			<td>Sounds</td>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="integer"><strong>0&deg;</strong></td>
			<td>East to west</td>
			<td>Faces east</td>
			<td>West to east</td>
			<td>From west</td>
		</tr>
		<tr>
			<td class="integer"><strong>90&deg;</strong></td>
			<td>South to north</td>
			<td>Faces south</td>
			<td>South to north</td>
			<td>From north</td>
		</tr>
		<tr>
			<td class="integer"><strong>180&deg;</strong></td>
			<td>West to east</td>
			<td>Faces west</td>
			<td>East to west</td>
			<td>From east</td>
		</tr>
		<tr>
			<td class="integer"><strong>270&deg;</strong></td>
			<td>North to south</td>
			<td>Faces north</td>
			<td>North to south</td>
			<td>From south</td>
		</tr>
	</tbody>
</table>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h1 id="ShapeFusion"><span id="shapes">ShapeFusion</span></h1>

<h2 id="general">General</h1>

<ul>
	<li>You can rename ShapeFusion resources by adding a file called <strong>DefaultNames.txt</strong> to your ShapeFusion folder. (You can also, of course, keep multiple ShapeFusion installs with different DefaultNames.txt files in each folder if you need versions for multiple scenarios.) Elsewhere on my site, I have <a href="defaultnames.txt">a version of DefaultNames.txt</a> incorporating complete lists of the Lua mnemonics for all possible resources, with a few specific changes, all detailed at the start of the file. Feel free to use these as needed to create names for your own scenarios.</li>
	<li>ShapeFusion has most of <strong>Anvil</strong>&rsquo;s functionality, plus some functionality Anvil lacks (e.g. the ability to add new sound slots or alter the frames in a sequence). However, it lacks two major features:</li>
		<ul>
			<li>Anvil&rsquo;s help balloons. I have <a href="anvilhelp.html">compiled these with asides</a> that correct inaccuracies and provide updates where ShapeFusion differs from Anvil.</li>
			<li>It can&rsquo;t create new physics models. The physics model that ships with <em>Infinity</em> is a <em>Marathon <span class="decimal">2</span></em> physics model and thus lacks SMG and VacBob slots, but <a href="https://simplici7y.com/items/default-infinity-physics-model-2" target="_blank">Simplici<span class="decimal">7</span>y</a> has a complete <em>Infinity</em> physics model.</li>
		</ul>
	<li>An annoying bug displays the <strong>Scale Factors</strong> of new frames as being above <span class="decimal">0</span>, but actually sets them to <span class="decimal">0</span>. The game doesn&rsquo;t display frames with <span class="decimal">0</span> scale factors (well, technically it still does, but because it&rsquo;s multiplying their sizes by <span class="decimal">0</span>, you won&rsquo;t ever see them). Be sure to fix this.</li>
	<li>The copy command works with a monster definition on Windows if you have <em>the monster name</em> selected; you can then paste it if you have another monster name selected. This can be used to copy a monster definition to another slot or to copy a monster to another physics file. (The same principle applies for other parts of the physics file; e.g., to copy a weapon definition, select the weapon.) Alas, this doesn&rsquo;t currently appear to work on Mac. I have no idea if it works on Linux &ndash; try it!</li>
	<li>ShapeFusion can read FLAC on Windows. Again, I don&rsquo;t think the Mac version can do this, and I have no idea about Linux.</li>
</ul>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="clutrestrictions">Restrictions on Number of Colors</h2>

<p>Palettes (also called <strong>CLUTs</strong>, short for <strong>Color Look-Up Tables</strong>, the name for these resources in MacOS&rsquo; resource fork in the classic OS) can pose particular problems. One particular issue occurs with non-standard CLUTs.</p>

<ol>
	<li>We&rsquo;re restricted to <span class="decimal">256</span> colors not just <em>within one palette</em> but <em>across all eight palettes within a collection</em>. If there are more than <span class="decimal">256</span>, then once it runs out, Aleph One will simply use the closest color it encounters among the first <span class="decimal">256</span>.</li>
	<li>Aleph One counts colors that are imperceptibly different as separate colors. For instance, it regards #<span class="decimal">0100</span>FF (red <span class="decimal">1</span>, green <span class="decimal">0</span>, blue <span class="decimal">255</span>) as different from #0200FF (red <span class="decimal">2</span>, green <span class="decimal">0</span>, blue <span class="decimal">255</span>).</li>
	<li>Unlike Anvil (which tried to restrict itself to vanilla-safe colors unless you specifically enabled a setting to override this), ShapeFusion isn&rsquo;t guaranteed to use the same colors each time it creates a color ramp unless each ramp starts and ends with the same color and contains the same number of colors.</li>
</ol>

<p>It&rsquo;s a mess. Two ways to ensure you&rsquo;re getting the <span class="decimal">256</span> colors you want:</p>

<ol>
	<li>Export all color tables in a collection to GIMP format (.gpl) and go through them with a fine-toothed comb. GIMP palettes are human-readable and can be edited in any text editor; each color is simply listed in RGB format, with values ranging from <span class="decimal">0</span> to <span class="decimal">255</span> for all three colors. After weeding out the unwanted near-identical colors across palettes, save and reimport.</li>
	<li>Simply use all <span class="decimal">256</span> colors you want in CLUT <span class="decimal">0</span> and rearrange them as desired in the others if needed. Be warned, however, that ShapeFusion currently has no option to reduce the number of colors per CLUT, should you decide you want fewer. You&rsquo;d currently need to open the shapes file in Anvil or Hakvil (using an emulator or a classic Mac) and adjust the palettes there.</li>
</ol>

<p>Note that using non-vanilla palettes causes <span class="decimal">8</span>-bit software mode to look very, very stupid, in case anyone even cares about that in a scenario created in <span class="decimal">2023</span>. I don&rsquo;t actually know how it selects the colors for that.</p>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="transparency">Transparency &amp; Landscapes</h2>

<p><em>Marathon</em> counts the first three colors of each CLUT as transparent, whether you want it to or not. Why does it need three? Why not just one? In all likelihood, only Jason Jones might be able to answer this question, assuming he even remembers the answer. This poses problems with custom landscape CLUTs. Why do landscapes even have transparency? Another question Jason Jones probably doesn&rsquo;t recall the answer to. The first three colors in a landscape CLUT are still considered transparent, and in OpenGL mode, <em>Marathon</em> changes anything it regards as transparent to show up as white.</p>

<p>As a result, for all practical purposes, landscape CLUTs are restricted to <span class="decimal">253</span> colors, so when generating landscape CLUTs, you must account for transparency and fill the CLUT&rsquo;s first three colors with garbage that won&rsquo;t show up in the landscape. Alternately (in Photoshop), you can:</p>

<ol>
<li>Convert to <span class="decimal">253</span>-color indexed color.</li>
<li>Convert back to RGB.</li>
<li>Using <strong>Forced &gt; Custom</strong> with #<span class="decimal">0000</span>FF, #FF<span class="decimal">00</span>FF, and #<span class="decimal">00</span>FFFF, convert to <span class="decimal">256</span>-color indexed color.</li>
<li>Export the new CLUT.</li>
</ol>

<p>Either way. (I don&rsquo;t use GIMP, but I&rsquo;m guessing you can do something similar by making a <span class="decimal">253</span>-color bitmap, exporting the CLUT, and editing it in a text editor.)</p>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="sequencetiming">Sequence Timing &amp; Film Compatibility</h2>

<ul><li>Ideally, &lsquo;Transfer mode period&rsquo; should equal &lsquo;Frames per view&rsquo; times &lsquo;Number of frames&rsquo;.</li>

<li>Changing a sequence&rsquo;s timing, loop frame, or key frame can desync films. (Probably obvious.)</li>

<li>Another surprising factor affecting film sync: &lsquo;Display a random frame&rsquo; (even if only one frame is defined) is different from &lsquo;Animation with <span class="decimal">1</span> view&rsquo; (or any other number). Altering this alters the PRNG when the game loads maps, since it runs the PRNG for each sequence that uses &lsquo;Display a random frame&rsquo;, even if it only has one frame. Thus, changing a sequence from or to &lsquo;Display a random frame&rsquo; desyncs old films made with the same shapes. (I haven&rsquo;t tested whether this also desyncs network games.)</li></ul>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h2 id="weaponsinhand">&lsquo;Weapons in Hand&rsquo; Sequences</h2>

<p>For years, Aleph One didn&rsquo;t have <span class="decimal">8</span>-bit software mode, so &lsquo;<span class="decimal">8</span>-bit color&rsquo; and &lsquo;true color&rsquo; sequences being out of alignment wasn&rsquo;t a problem. Aleph One 1.4 restored it, so it&rsquo;s worth taking note if a sequence is present in one and not the other. A physics model calling said sequence in 8-bit software mode will crash Aleph One (or cause an assertion failure; I forget which, but either way, it closes the game). Plus, if a sequence has a different timing between the two versions of a collection, it&rsquo;ll desync films and may desync network games if one player uses <span class="decimal">8</span>-bit software mode and the other doesn&rsquo;t.</p>

<p>As tempting as it is to tell players not to use <span class="decimal">8</span>-bit software mode, some will inevitably disregard it out of ignorance, and others out of pure spite (insert out-of-context &lsquo;Killing in the Name&rsquo; quote here). The best solution is to make sure each sequence in both versions has the same sequence type, frames per view, ticks per frame, loop frame, key frame, transfer mode period, and frame sound, then update one anytime you update the other.</p>

<p>By default, the only other collections with &lsquo;true color&rsquo; versions are the landscape palettes, and it&rsquo;s very rare (though not unthinkable) for something to call one of the sequences in these (assuming any are even defined). I think a classic Mac utility could create &lsquo;true color&rsquo; versions of other collections (all <span class="decimal">32</span> collections can have them; it&rsquo;s just that, by default, only the Weapons in Hand and Landscapes did), and if a shapes file had these, their sequences should align between &lsquo;<span class="decimal">8</span>-bit&rsquo; and &lsquo;true color&rsquo; wherever they&rsquo;re defined.</p>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h1 id="appendices">Appendices &amp; Transplanted Content</h1>

<p>I&rsquo;ve split several sections off onto their own pages. Please update your links accordingly:</p>

<ul>
	<li>I&rsquo;ve moved <strong id="circles">Circles and the Custom Grid</strong> and its subsection <strong id="radii">Radii and Rotations for <span class="decimal">1</span> WU-long Sides with Regular Polygons</strong> to <a href="marathoncircles.html">aaronfreed.github.io/marathoncircles.html</a>.</li>
	<li><strong id="mapcomplexity">Map Complexity: A Case Study</strong> has moved to <a href="mapcomplexity.html">aaronfreed.github.io/mapcomplexity.html</a>.
		<ul>
			<li>I wrote a follow-up, <strong>Reducing Map Index Use</strong> (<a href="mapindexreduction.html">aaronfreed.github.io/mapindexreduction.html</a>), partway through splitting up this page.</li>
		</ul>
	</li>
	<li>The <strong id="sounds"><span id="sounds-general"></span><span id="soundids"></span><span id="soundsources"></span>Sounds</strong> section has moved to <a href="marathonsounds.html">aaronfreed.github.io/marathonsounds.html</a>.</li>
	<li><strong id="anvilhelp">The Annotated Anvil Help Balloons</strong> has moved to <a href="anvilhelp.html">aaronfreed.github.io/anvilhelp.html</a>.</li>
	<li><strong id="defaultnames">Example DefaultNames.txt</strong> (see <a href="#ShapeFusion">reference</a> above) has moved to <a href="defaultnames.html">aaronfreed.github.io/defaultnames.html</a>.</p>
	<li><strong id="looper">Looping Music</strong> has moved to <a href="marathonlooper.html">marathonlooper.html</a> (Aleph One 1.7 renders it mostly superfluous).</li>
	<li>Another new appendix, <strong>Where Are Monsters in Marathon&hellip;Maps</strong>, examines what monsters appear in what <em>Marathon</em> trilogy levels to demonstrate an important game design paradox: sometimes decreasing variety <em>within</em> a small span of a game can <em>increase</em> variety <em>across</em> a much larger span of it (or all of it). It is found at <a href="marathonmonsters.html">aaronfreed.github.io/marathonmonsters.html</a>.</a></li>
</ul>

<p>Additionally, to avoid duplicating content, I&rsquo;ve moved several sections to the <a href="mapmaking101.html">beginners&rsquo; mapmaking page</a>. Here are direct links to the relevant sections:</p>
	<ul>
		<li>I&rsquo;ve primarily split <strong id="resources">Resources</strong> across <a href="mapmaking101.html#editors" id="editors">Aleph One Content Editors</a> and <a href="mapmaking101.html#furtherreading">Further Reading</a>, with a small bit going into the <a href="mapmaking101.html#basics">Mapmaking Basics</a> section.
			<ul>
				<li><a href="mapmaking101.html#editorsm2i" id="resourcesa1">Aleph One Content Editing (<em>Marathon <span class="decimal">2</span></em>/<em>Infinity</em> Format)</a></li>
				<li><a href="mapmaking101.html#editorsm1" id="resourcesm1"><em>Marathon <span class="decimal">1</span></em> Content Editing for Aleph One</a></li>
				<li>I&rsquo;ve also split <strong id="tutorialsother">Other Tutorials &amp; Resources</strong>:
					<ul>
						<li><a href="mapmaking101.html#startertutorials">Tutorials &amp; Resources for Beginning Mapmakers</a></li>
						<li><a href="mapmaking101.html#advancedtutorials">Advanced Tutorials &amp; Resources</a></li>
					</ul>
				</li>
				<li><a href="mapmaking101.html#resourcescommunity">Marathon Communities &amp; Resources</a></li>
			</ul>
		</li>
		<li><a href="mapmaking101.html#welandsetup" id="welandsetup">Weland Setup</a>
			<ul>
				<li><a href="mapmaking101.html#welandpreferences" id="welandpreferences">Configuring Weland&rsquo;s Preferences</a></li>
				<li><a href="mapmaking101.html#visualmodemac" id="visualmodemac">Installing Visual Mode &amp; Vasara (MacOS)</a></li>
				<li><a href="mapmaking101.html#visualmodewin" id="visualmodewinlin">Installing Visual Mode &amp; Vasara (Windows)</a></li>
				<li><a href="mapmaking101.html#visualmodepreferences" id="visualmodepreferences">Configuring Weland!Aleph One</a></li>
			</ul>
		</li>
		<li><a href="mapmaking101.html#forgeerrata" id="forgeerrata">Forge Manual Errata &amp; Omissions</a></li>
		<li><a href="mapmaking101.html#texturingissues" id="texturingissues">Texturing Issues in Visual Mode.lua and Vasara</a>
			<ul>
				<li><a href="mapmaking101.html#vasaratexturing" id="vasaratexturing">Further Texturing Issues in Vasara</a></li>
			</ul>
		</li>
	</ul>

	<p>Lastly, I&rsquo;ve moved my <a href="aboutme.html"aboutme.html"" id="bio">biography</a> and <a href="aboutme.html#contact" id="contact">contact info</a> to a dedicated page: <a href="aboutme.html">aaronfreed.github.io/aboutme.html</a>.</p>


<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

<h1 id="thanks">Acknowledgements</h2>

	<ul>
		<li><strong>Paul S.</strong> on Stack Overflow for his <a href="https://stackoverflow.com/questions/14267781/sorting-html-table-with-javascript/14268260#14268260">table sort script</a>, and <strong>Fla</strong> for a revision that enabled it to sort numeric values. (My knowledge of JavaScript is effectively nonexistent.)</li>
		<li><strong>Jason Karns</strong> and <strong>Davide Cannizzo</strong> on Stack Overflow for the <a href="https://stackoverflow.com/a/21684020">CSS table of contents</a>, which is beyond my relatively competent level of CSS ability.</li>
		<li><strong>Solra Bizna</strong> for an incomprehensible amount of programming help, including the CSS that makes this exact page follow your computer&rsquo;s dark mode settings.</li>
		<li><strong>W&rsquo;rkncacnter</strong> for pointing out a sound source that eluded me (namely the fighter death).</li>
		<li>The numerous mapmakers I&rsquo;ve learned from or been influenced by over the years. I couldn&rsquo;t possibly hope to list them all, but <strong>James Hastings-Trew</strong>, <strong>CryoS</strong>, <strong>hypersleep</strong>, <strong>RyokoTK</strong>, <strong>windbreaker</strong>, <strong>Don-Martin Antell</strong>, <strong>Drictelt</strong>, <strong>Mike Trinder</strong>, <strong>Jason Harper</strong>, <strong>Chris Lund</strong>, <strong>Courtney Evans</strong>, <strong>Frank Rooke</strong>, <strong>Devon Belcher</strong>, <strong>Borzz</strong>, <strong>Rich Dierkes</strong>, <strong>Shebob</strong>, <strong>Jason Jones</strong>, <strong>Greg Kirkpatrick</strong>, <strong>Randy Reddig</strong>, <strong>Antonio de Llamas</strong>, and <strong>FM</strong> have to number among them.</li>
		<li>The numerous people who have helped write and maintain <strong>Aleph One</strong> and its editors over the years.</li>
		<li><strong>Bungie</strong>, for obvious reasons.</li> 
	</ul>

	<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>
	
<!--<h1 id="bio">Who are you and what qualifies you to write this?</h1>

	<p>I&rsquo;m Aaron; I&rsquo;m likely best-known in the community for co-directing <em><a href="http://eternal.bungie.org/development" target="_blank">Eternal</a></em>, though I&rsquo;ve also worked in some capacity (not always mapping-related) on current and forthcoming mods like <em><a href="https://simplici7y.com/items/apotheosis-x-5" target="_blank">Apotheosis X</a></em>, <em><a href="https://simplici7y.com/items/dungeons-hellpak-vol-1-not-recommended-by-doctors" target="_blank">Hellpak</a></em>, <em>Tempus Irae Redux</em>, <em>Where Monsters Are in Dreams</em>, <em>Marathon Chronicles</em>&hellip;basically, I&rsquo;ve been busy mapping for this engine off and on since about <span class="decimal">1997</span>, during which I&rsquo;ve acquired all kinds of stupid arcane knowledge about it. Have you ever heard of ambient light delta? Neither had Aleph One&rsquo;s developers until I pointed it out. I&rsquo;m not saying that because I think it&rsquo;s worth being proud of having acquired so much useless and pointless knowledge, but what I do have are a very particular set of skills, skills I have acquired over a very long career. Skills that make me&hellip; oh, sorry, that&rsquo;s <em>Taken</em>. Anyway, I feel Aleph One content creation should have a lower barrier to entry, so here&rsquo;s an attempt to create a reference for solutions to some of its frustrating problems.</p>

	<p>You may also be interested in my <a href="soundtracks.html"><em>Marathon</em> soundtracks page</a>, which contains some technical information about remastering music and sounds that may be helpful to those working on sounds or music. A lot of my own creative work, much of which is <em>Marathon</em>-related, may be found on my <a href="discography.html">discography</a> and <a href="portfolio.html">portfolio</a> pages.</p>

<h1 id="contact">Contact Info</h1>

	<p>The fastest way to contact me is Discord. You can ping me on the <a href="https://discord.gg/c7rEVgY" target="_blank">Marathon Discord server</a> at <strong>@aaron6608</strong> (or <strong>@Aaron#<span class="decimal">6608</span></strong>), though it&rsquo;s entirely possible others may be able to answer your questions before I see them, so I recommend this only if you notice errors/omissions in this document (or have suggestions for additions; if you remind me, I can credit you for any of the above). If you need help, I recommend asking in <strong>#classic-marathon</strong>, <span id="ftnt_ref02" class="dotted" title="Which, despite carrying the name of a program hardly anyone has actively used for fifteen years, is meant for all map, physics, shapes, and sound creation for the Marathon trilogy."></span><strong>#forge</strong><a href="#ftnt02">&#8317;&sup2;&#8318;</a></span>, or <strong>#tech-support</strong>. (<strong>#development</strong> is intended only for engine and editor development, so unless you&rsquo;re specifically discussing Vasara AF, you should probably ping me in one of the other three channels.)</p>
	
	<p>I&rsquo;m also on GitHub as <a href="https://github.com/aaronfreed" target="_blank">aaronfreed</a>, naturally. You can <a href="https://github.com/aaronfreed/aaronfreed.github.io/issues/" target="_blank">create an issue</a>, <a href="https://github.com/aaronfreed/aaronfreed.github.io/pulls" target="_blank">submit a pull request</a>, or <a href="https://github.com/aaronfreed/aaronfreed.github.io/discussions" target="_blank">start a discussion</a>. I do ask that users be respectful (both of me and of others) and note that I maintain this page on my own time, for free, while also juggling multiple active development projects that I&rsquo;m also working on, also for free. The <a href="https://github.com/aaronfreed/aaronfreed.github.io/discussions/1" target="_blank">rules I outline for my discussion section</a> apply equally well to issues and pull requests.</p>

	<p>I&rsquo;m also on the <a href="https://pfhorums.com" target="_blank">Pfhorums</a> (as <a href="https://pfhorums.com/memberlist.php?mode=viewprofile&u=6618" target="_blank">The Man</a>) and <a href="https://reddit.com/r/marathon/" target="_blank">Reddit</a> (as <a href="https://reddit.com/u/aaronnotarobot" target="_blank">u/aaronnotarobot</a>), but I can&rsquo;t promise to respond to messages on either quickly. Lastly, I do, of course, have an email address, but:</p>

	<ol class="loweralpha">
		<li>Email is very nearly the <em>worst</em> way to contact me.</li>
		<li>The days when it was a good idea to post an email address on a public webpage are long over.</li>
	</ol>

	<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p> -->

<h1 id="endnotes">Endnotes</h1>

<table class="light endnotes">
	<thead>
		<tr>
			<th class="integer"><strong>#</strong></th>
			<th><strong>Note</strong></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="integer"><a href="#ftnt_ref01" id="ftnt01"><strong>1</strong></a></td>
			<td>What, you don&rsquo;t have a third hand? Then you must not be Zaphod Beeblebrox.</td>
		</tr>
<!--		<tr>
			<td class="integer"><a href="#ftnt_ref02" id="ftnt02"><strong>2</strong></a></td>
			<td>Which, despite carrying the name of a program hardly anyone has actively used for fifteen years, is meant for <em>all</em> map, physics, shapes, and sound creation for Aleph One or the <em>Marathon</em> trilogy.</td>
		</tr>-->
	</tbody>
</table>

<p class="sectionbreak"><a href="#top">Back to top</a> &middot; <a href="#toc">Table of contents</a> &middot; <a href="mapmaking101.html">Beginners&rsquo; guide</a> &middot; <a href="aboutme.html">Contact me</a> &middot; <a href="/">Website index</a></p>

</body>
</html>
